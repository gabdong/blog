(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[144],{3425:function(t){t.exports=function(t,e){(e=e||{}).listUnicodeChar=!!e.hasOwnProperty("listUnicodeChar")&&e.listUnicodeChar,e.stripListLeaders=!e.hasOwnProperty("stripListLeaders")||e.stripListLeaders,e.gfm=!e.hasOwnProperty("gfm")||e.gfm,e.useImgAltText=!e.hasOwnProperty("useImgAltText")||e.useImgAltText,e.abbr=!!e.hasOwnProperty("abbr")&&e.abbr,e.replaceLinksWithURL=!!e.hasOwnProperty("replaceLinksWithURL")&&e.replaceLinksWithURL,e.htmlTagsToSkip=e.hasOwnProperty("htmlTagsToSkip")?e.htmlTagsToSkip:[];var n=t||"";n=n.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*/gm,"");try{e.stripListLeaders&&(n=e.listUnicodeChar?n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,e.listUnicodeChar+" $1"):n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),e.gfm&&(n=n.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),e.abbr&&(n=n.replace(/\*\[.*\]:.*\n/,"")),n=n.replace(/<[^>]*>/g,"");var a=RegExp("<[^>]*>","g");if(e.htmlTagsToSkip.length>0){var r="(?!"+e.htmlTagsToSkip.join("|")+")";a=RegExp("<"+r+"[^>]*>","ig")}n=n.replace(a,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,e.useImgAltText?"$1":"").replace(/\[([^\]]*?)\][\[\(].*?[\]\)]/g,e.replaceLinksWithURL?"$2":"$1").replace(/^\s{0,3}>\s?/gm,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} #{0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*]+)(\S)(.*?\S)??\1/g,"$2$3").replace(/(^|\W)([_]+)(\S)(.*?\S)??\2($|\W)/g,"$1$3$4$5").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/~(.*?)~/g,"$1")}catch(e){return console.error(e),t}return n}},8144:function(t,e,n){"use strict";n.d(e,{Z:function(){return PostList}});var a=n(5059),r=n(8598),i=n(2684),s=n(9518),l=n(3425),o=n.n(l),c=n(2691),p=n.n(c),d=n(4399),u=n(4686),h=n(4376);function _templateObject(){let t=(0,a._)(["\n  display: flex;\n  justify-content: center;\n  gap: 8px;\n\n  padding: 20px 0;\n\n  & > a {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    width: 20px;\n    height: 20px;\n    padding: 4px;\n    border-radius: var(--border-radius);\n    background: var(--gray);\n    cursor: pointer;\n  }\n\n  & > a.active {\n    background: var(--primary-color);\n  }\n"]);return _templateObject=function(){return t},t}let g=s.ZP.div.withConfig({componentId:"sc-d0851606-0"})(_templateObject());var m=i.memo(function(t){let{totalCnt:e,page:n,paginationCnt:a=10,path:i,limit:s=10}=t,l=(0,h.useRouter)();if(e<=s)return null;let o=Math.floor(n/a)*a+1;n%a==0&&(o-=a);let c=Math.ceil(e/s),u=Math.ceil(e/10)>a?a:Math.ceil(e/10);o+u>c&&(u=c-o+1);let m=1!==n,f=n!==c,x=n>1,b=n<c;return(0,r.jsxs)(g,{children:[m?(0,r.jsx)(p(),{href:"".concat(i,"?page=1"),children:(0,r.jsx)(d.b2E,{})}):null,x?(0,r.jsx)(p(),{href:"".concat(i,"?page=").concat(n-a<1?1:n-a),children:(0,r.jsx)(d.D68,{})}):null,"//* 페이지",Array.from({length:u}).map((t,e)=>{let n=o+e;return(0,r.jsx)(p(),{className:()=>{let t=Number(l.query.page),e="normalText";return t===n&&(e+=" active"),e},href:"".concat(i,"?page=").concat(n),children:n},n)}),b?(0,r.jsx)(p(),{href:"".concat(i,"?page=").concat(n+a>c?c:n+a),children:(0,r.jsx)(d.sOJ,{})}):null,f?(0,r.jsx)(p(),{href:"".concat(i,"?page=").concat(c),children:(0,r.jsx)(d.cHm,{})}):null]})});function PostList_templateObject(){let t=(0,a._)(["\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1;\n  gap: 20px;\n\n  min-width: 0;\n  max-width: 100%;\n"]);return PostList_templateObject=function(){return t},t}function _templateObject1(){let t=(0,a._)(["\n  width: calc(100% / 3 - 14px);\n  border-radius: var(--border-radius);\n  background: var(--dark-l);\n  transition: var(--transition);\n  cursor: pointer;\n\n  &:hover {\n    transform: translateY(-8px);\n  }\n\n  @media all and (max-width: 1023px) {\n    width: calc(50% - 10px);\n\n    &:hover {\n      transform: none;\n    }\n  }\n\n  @media all and (max-width: 767px) {\n    width: 100%;\n    gap: 12px;\n  }\n"]);return _templateObject1=function(){return t},t}function _templateObject2(){let t=(0,a._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]);return _templateObject2=function(){return t},t}function _templateObject3(){let t=(0,a._)(["\n  padding-top: 52%;\n  background: var(--dark-m);\n  position: relative;\n\n  & > svg {\n    font-size: 38px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n"]);return _templateObject3=function(){return t},t}function _templateObject4(){let t=(0,a._)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 14px;\n\n  height: 100%;\n  padding: 16px;\n\n  & > div {\n    display: flex;\n    flex-direction: column;\n    align-items: start;\n    gap: 10px;\n\n    height: 80px;\n  }\n\n  & > div .postSubject {\n    max-width: 100%;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n\n  & > div .postContent {\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 3;\n    word-break: break-all;\n    overflow: hidden;\n  }\n\n  & > div .date {\n    flex-shrink: 0;\n  }\n\n  @media all and (max-width: 479px) {\n    & > div {\n      height: 60px;\n    }\n  }\n"]);return _templateObject4=function(){return t},t}function PostList(t){let{tagIdx:e="total",page:n=1,limit:a=9,paginationUsing:s=!0}=t,[l,c]=(0,i.useState)(!0),[p,h]=(0,i.useState)([]),[g,v]=(0,i.useState)(0);return(0,i.useEffect)(()=>{!async function(){let t=await (0,u.UI)(e,n,a,s),r=(null==t?void 0:t.postList)||[],i=(null==t?void 0:t.totalCnt)||0;h(r),v(i),c(!1)}()},[e,n]),(0,r.jsx)(r.Fragment,{children:l?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{children:p.map(t=>{let{idx:n,subject:a,content:i,thumbnail:s,thumbnailAlt:l,datetime:c}=t,p=new Date(c).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),u=o()(i.replace(/<\/?[^>]+(>|$)/g,""));return(0,r.jsx)(x,{className:"postListLi",children:(0,r.jsxs)(b,{href:"/post/".concat(n,"?tagIdx=").concat(e),children:[s?(0,r.jsx)(w,{style:{background:"url(".concat(s,")"),backgroundSize:"cover",backgroundPosition:"center"},title:l}):(0,r.jsx)(w,{children:(0,r.jsx)(d.e0s,{})}),(0,r.jsxs)(j,{className:"postInfoWrap",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"subTitle postSubject",children:a}),(0,r.jsx)("p",{className:"caption postContent",children:u})]}),(0,r.jsx)("p",{className:"caption date",children:p})]})]})},n)})}),s?(0,r.jsx)(m,{totalCnt:g,page:n,paginationCnt:5,path:"/tag/".concat(e),limit:9}):null]})})}let f=s.ZP.ul.withConfig({componentId:"sc-33e114b5-0"})(PostList_templateObject()),x=s.ZP.li.withConfig({componentId:"sc-33e114b5-1"})(_templateObject1()),b=(0,s.ZP)(p()).withConfig({componentId:"sc-33e114b5-2"})(_templateObject2()),w=s.ZP.div.withConfig({componentId:"sc-33e114b5-3"})(_templateObject3()),j=s.ZP.div.withConfig({componentId:"sc-33e114b5-4"})(_templateObject4())},2750:function(t,e,n){"use strict";n.d(e,{I:function(){return uploadImage}});var a=n(8175);async function uploadImage(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{name:i,size:s}=n;try{let l=await a.Z.get("/apis/images/",{params:{name:i,size:s}});if(l.data.url)t=l.data.url,r=l.data.alt,e=l.data.idx,alert("중복된 이미지가 있어 정보를 불러옵니다.");else{let s=new FormData;s.append("image",n),s.append("alt",null!=r?r:i),s.append("checkAuth",!0);let l=await a.Z.post("/apis/images",s);t=l.data.url,e=l.data.idx,r=l.data.alt}return{url:t,alt:r,idx:e}}catch(t){t.response.data.msg?alert(t.response.data.msg):415==t.response.status?alert("잘못된 확장자입니다."):alert("이미지 업로드를 실패하였습니다.")}}},4686:function(t,e,n){"use strict";n.d(e,{UI:function(){return getPostList},dq:function(){return editPost},fR:function(){return deletePost},lT:function(){return uploadPost}});var a=n(8175),r=n(2750);async function getPostList(t,e,n,r){try{let i=await a.Z.get("/apis/posts/list/".concat(t),{params:{limit:n,page:e,paginationUsing:r}});return i.data}catch(t){console.error(t.response.data.msg)}}async function deletePost(t,e){if(window.confirm("게시글 삭제를 진행하시겠습니까?"))try{await a.Z.delete("/apis/posts/".concat(t)),e.push("/")}catch(t){console.error(t.response.data.msg)}}async function uploadPost(t){if(t.uploadThumbnail){let{uploadThumbnail:n,thumbnailAlt:i}=t;try{let e=await (0,r.I)(n,i),s=e.idx;t.thumbnail=s,await a.Z.post("/apis/posts",{checkAuth:!0,postData:t})}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.data.msg)&&console.error(t.response.data.msg)}}}async function editPost(t){try{let e=await (0,r.I)(uploadThumbnail,thumbnailAlt),n=e.idx;t.thumbnail=n,await a.Z.post("/apis/posts/".concat(t.postIdx),{checkAuth:!0,postData:t})}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.data.msg)&&console.error(t.response.data.msg)}}n(279)}}]);